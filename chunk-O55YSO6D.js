import{a as h}from"./chunk-P7VRW5XH.js";import{Ca as x,Da as b,I as o,Ia as M,O as _,S as l,X as s,Y as i,Z as t,ca as v,da as u,fa as p,ha as n,ia as d,ja as m,v as g,x as f,y as C}from"./chunk-3R7WGHIS.js";function y(r,a){r&1&&(i(0,"div",7)(1,"p"),n(2,"Cargando citas..."),t()())}function S(r,a){r&1&&(i(0,"div",8)(1,"div",9),n(2,"\u{1F4CB}"),t(),i(3,"h3"),n(4,"No hay citas pendientes"),t(),i(5,"p"),n(6,"Actualmente no hay citas sin asignar"),t()())}function I(r,a){if(r&1&&(i(0,"div",29)(1,"strong"),n(2,"\u{1F4DD} Notas:"),t(),i(3,"p"),n(4),t()()),r&2){let e=p().$implicit;o(4),d(e.notas)}}function D(r,a){if(r&1){let e=v();i(0,"div",19)(1,"div",20)(2,"div",21)(3,"span",22),n(4,"\u{1F4C5}"),t(),i(5,"strong"),n(6),t(),i(7,"span",23),n(8),t()(),i(9,"div",24)(10,"p",25),n(11),t(),i(12,"p",26)(13,"strong"),n(14," Tel\xE9fono:"),t(),n(15),t(),i(16,"p",26)(17,"strong"),n(18," Correo:"),t(),n(19),t()(),l(20,I,5,1,"div",27),t(),i(21,"button",28),u("click",function(){let P=f(e).$implicit,E=p(3);return C(E.aceptarCita(P.id_cita))}),n(22),t()()}if(r&2){let e=a.$implicit,c=p(3);o(6),d(c.formatearFecha(e.fecha)),o(2),d(c.formatearHora(e.hora)),o(3),d(e.paciente.nombre),o(4),m(" ",e.paciente.telefono," "),o(4),m(" ",e.paciente.correo," "),o(),s("ngIf",e.notas),o(),s("disabled",c.procesandoCita===e.id_cita),o(),m(" ",c.procesandoCita===e.id_cita?"Procesando...":"Aceptar Cita"," ")}}function w(r,a){if(r&1&&(i(0,"div",12)(1,"div",13)(2,"h2"),n(3),t(),i(4,"span",14),n(5),t()(),i(6,"p",15),n(7),t(),i(8,"p",16),n(9),t(),i(10,"div",17),l(11,D,23,8,"div",18),t()()),r&2){let e=a.$implicit;o(3),d(e.nombre),o(2),m("",e.citas.length," citas"),o(2),d(e.descripcion),o(2),m("\u23F1\uFE0F Duraci\xF3n: ",e.duracion," minutos"),o(2),s("ngForOf",e.citas)}}function F(r,a){if(r&1&&(i(0,"div",10),l(1,w,12,5,"div",11),t()),r&2){let e=p();o(),s("ngForOf",e.serviciosConCitas)}}var O=class r{api=g(h);serviciosConCitas=[];isLoading=!0;procesandoCita=null;ngOnInit(){this.cargarCitasPendientes()}cargarCitasPendientes(){this.isLoading=!0,this.api.getCitasPendientes().subscribe({next:a=>{this.serviciosConCitas=a,this.isLoading=!1},error:a=>{console.error("Error al cargar citas pendientes:",a),this.isLoading=!1}})}aceptarCita(a){confirm("\xBFEst\xE1s seguro de que deseas aceptar esta cita?")&&(this.procesandoCita=a,this.api.aceptarCita(a).subscribe({next:()=>{alert("\xA1Cita aceptada exitosamente!"),this.procesandoCita=null,this.cargarCitasPendientes()},error:e=>{console.error("Error al aceptar la cita:",e),alert("Error al aceptar la cita. Por favor intenta nuevamente."),this.procesandoCita=null}}))}formatearFecha(a){let e=new Date(a+"T00:00:00"),c={weekday:"long",year:"numeric",month:"long",day:"numeric"};return e.toLocaleDateString("es-ES",c)}formatearHora(a){return a.substring(0,5)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=_({type:r,selectors:[["app-citas-medico"]],decls:10,vars:3,consts:[[1,"citas-container"],[1,"citas-header"],[1,"subtitle"],[1,"citas-content"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","servicios-grid",4,"ngIf"],[1,"loading"],[1,"empty-state"],[1,"empty-icon"],[1,"servicios-grid"],["class","servicio-card",4,"ngFor","ngForOf"],[1,"servicio-card"],[1,"servicio-header"],[1,"badge"],[1,"servicio-descripcion"],[1,"servicio-duracion"],[1,"citas-list"],["class","cita-item",4,"ngFor","ngForOf"],[1,"cita-item"],[1,"cita-info"],[1,"cita-fecha"],[1,"icon"],[1,"hora"],[1,"paciente-info"],[1,"paciente-nombre"],[1,"paciente-detalle"],["class","cita-notas",4,"ngIf"],[1,"btn-aceptar",3,"click","disabled"],[1,"cita-notas"]],template:function(e,c){e&1&&(i(0,"div",0)(1,"header",1)(2,"h1"),n(3,"Gesti\xF3n de Citas"),t(),i(4,"p",2),n(5,"Revisa y acepta las citas pendientes"),t()(),i(6,"div",3),l(7,y,3,0,"div",4)(8,S,7,0,"div",5)(9,F,2,1,"div",6),t()()),e&2&&(o(7),s("ngIf",c.isLoading),o(),s("ngIf",!c.isLoading&&c.serviciosConCitas.length===0),o(),s("ngIf",!c.isLoading&&c.serviciosConCitas.length>0))},dependencies:[M,x,b],styles:[".citas-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.citas-header[_ngcontent-%COMP%]{margin-bottom:2rem}.citas-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#7f8c8d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#f8f9fa;border-radius:12px}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d}.servicios-grid[_ngcontent-%COMP%]{display:grid;gap:2rem}.servicio-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a}.servicio-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:2px solid #e9ecef}.servicio-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.5rem;margin:0}.badge[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:600}.servicio-descripcion[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:.5rem}.servicio-duracion[_ngcontent-%COMP%]{color:#95a5a6;font-size:.875rem;margin-bottom:1.5rem}.citas-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.cita-item[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.25rem;border-left:4px solid #3498db}.cita-info[_ngcontent-%COMP%]{margin-bottom:1rem}.cita-fecha[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;font-size:1rem}.cita-fecha[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem}.hora[_ngcontent-%COMP%]{color:#7f8c8d;font-weight:400}.paciente-info[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:6px;margin-bottom:1rem}.paciente-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#2c3e50;font-size:.95rem}.cita-notas[_ngcontent-%COMP%]{background:#fff3cd;padding:1rem;border-radius:6px;border-left:3px solid #ffc107}.cita-notas[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#856404;display:block;margin-bottom:.5rem}.cita-notas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#856404;margin:0;font-style:italic}.btn-aceptar[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;background:#b9daf3;color:#505050;border:none;border-radius:6px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-aceptar[_ngcontent-%COMP%]:hover:not(:disabled){background:#b9daf3;transform:translateY(-2px);box-shadow:0 4px 12px #2766ae4d}.btn-aceptar[_ngcontent-%COMP%]:disabled{background:#95a5a6;cursor:not-allowed;transform:none}@media (max-width: 768px){.citas-container[_ngcontent-%COMP%]{padding:1rem}.citas-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.servicio-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})};export{O as a};
