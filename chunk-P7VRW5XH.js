import{La as d,Va as g,f as a,k as o,m as n,n as p,r as h,v as u}from"./chunk-3R7WGHIS.js";var b=class s{http=u(d);auth=u(g);API_URL="https://consultorio-backend-production-9816.up.railway.app";getRole(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/api/profile/get-role`,{headers:t})}),o(e=>(console.error("Error al obtener el rol o token no disponible:",e),a(null))))}registerProfile(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let i={Authorization:`Bearer ${r}`},c={rol:e,data:t};return this.http.post(`${this.API_URL}/api/profile/register`,c,{headers:i})}))}getCitasPendientes(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/api/citas/pendientes`,{headers:t})}),o(e=>(console.error("Error al obtener citas pendientes:",e),a([]))))}aceptarCita(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.post(`${this.API_URL}/api/citas/aceptar/${e}`,{},{headers:r})}))}getMisCitasMedico(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/api/citas/mis-citas-medico`,{headers:t})}),o(e=>(console.error("Error al obtener citas del m\xE9dico:",e),a([]))))}getMisPacientes(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/api/medico/mis-pacientes`,{headers:t})}),o(e=>(console.error("Error al obtener lista de pacientes del m\xE9dico:",e),a([]))))}getPacienteDetalle(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/api/paciente/${e}`,{headers:r}).pipe(o(i=>{throw i.status===403?console.error("Acceso denegado: Paciente no asignado a este m\xE9dico"):i.status===404&&console.error("Paciente no encontrado"),i}))}))}cancelarCita(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.post(`${this.API_URL}/api/citas/cancelar-medico/${e}`,{},{headers:r})}))}getTiposAntecedente(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/api/antecedente/tipos`,{headers:t})}),p(e=>console.log("Tipos obtenidos (tap):",e)),o(e=>(console.error("Error al obtener tipos de antecedente:",e),a([]))))}getAntecedentesMedicos(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/api/paciente/${e}/antecedentes`,{headers:r})}),o(t=>(console.error("Error al obtener antecedentes m\xE9dicos:",t),a([]))))}updateAntecedentesMedicos(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let i={Authorization:`Bearer ${r}`};return this.http.post(`${this.API_URL}/api/paciente/${e}/antecedentes`,{antecedentes:t},{headers:i})}),o(r=>(console.error("Error al actualizar antecedentes m\xE9dicos:",r),a({ok:!1,error:r}))))}getAntecedentesOdonto(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/api/paciente/${e}/antecedentes-odontologicos`,{headers:r})}),o(t=>(console.error("Error al obtener antecedentes odontol\xF3gicos:",t),a(null))))}updateAntecedentesOdonto(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let i={Authorization:`Bearer ${r}`};return this.http.put(`${this.API_URL}/api/paciente/${e}/antecedentes-odontologicos`,t,{headers:i})}),o(r=>(console.error("Error al actualizar antecedentes odontol\xF3gicos:",r),a({ok:!1,error:r}))))}getOdontograma(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/api/paciente/${e}/odontogramas`,{headers:r})}),o(t=>(console.error("Error al obtener odontogramas:",t),a([]))))}uploadOdontograma(e,t,r){return this.auth.getAccessTokenSilently().pipe(n(i=>{let c={Authorization:`Bearer ${i}`},l=new FormData;return l.append("file",t),r&&l.append("observaciones",r),this.http.post(`${this.API_URL}/api/paciente/${e}/odontograma`,l,{headers:c})}),o(i=>(console.error("Error al subir odontograma:",i),a({ok:!1,error:i}))))}getEvolucion(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/api/paciente/${e}/evolucion`,{headers:r})}),o(t=>(console.error("Error al obtener evoluci\xF3n:",t),a([]))))}addEvolucion(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let i={Authorization:`Bearer ${r}`};return this.http.post(`${this.API_URL}/api/paciente/${e}/evolucion`,t,{headers:i})}),o(r=>(console.error("Error al agregar evoluci\xF3n:",r),a(null))))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})};export{b as a};
