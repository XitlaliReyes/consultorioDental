import{La as d,Va as g,f as s,k as i,m as n,n as p,r as h,v as u}from"./chunk-WYBMJEXJ.js";var b=class a{http=u(d);auth=u(g);API_URL="https://consultorio-backend-production-9816.up.railway.app/api";getRole(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/profile/get-role`,{headers:t})}),i(e=>(console.error("Error al obtener el rol o token no disponible:",e),s(null))))}registerProfile(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let o={Authorization:`Bearer ${r}`},c={rol:e,data:t};return this.http.post(`${this.API_URL}/profile/register`,c,{headers:o})}))}getCitasPendientes(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/citas/pendientes`,{headers:t})}),i(e=>(console.error("Error al obtener citas pendientes:",e),s([]))))}aceptarCita(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.post(`${this.API_URL}/citas/aceptar/${e}`,{},{headers:r})}))}getMisCitasMedico(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/citas/mis-citas-medico`,{headers:t})}),i(e=>(console.error("Error al obtener citas del m\xE9dico:",e),s([]))))}getMisPacientes(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/medico/mis-pacientes`,{headers:t})}),i(e=>(console.error("Error al obtener lista de pacientes del m\xE9dico:",e),s([]))))}getPacienteDetalle(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/paciente/${e}`,{headers:r}).pipe(i(o=>{throw o.status===403?console.error("Acceso denegado: Paciente no asignado a este m\xE9dico"):o.status===404&&console.error("Paciente no encontrado"),o}))}))}cancelarCita(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.post(`${this.API_URL}/citas/cancelar-medico/${e}`,{},{headers:r})}))}getTiposAntecedente(){return this.auth.getAccessTokenSilently().pipe(n(e=>{let t={Authorization:`Bearer ${e}`};return this.http.get(`${this.API_URL}/antecedente/tipos`,{headers:t})}),p(e=>console.log("Tipos obtenidos (tap):",e)),i(e=>(console.error("Error al obtener tipos de antecedente:",e),s([]))))}getAntecedentesMedicos(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/paciente/${e}/antecedentes`,{headers:r})}),i(t=>(console.error("Error al obtener antecedentes m\xE9dicos:",t),s([]))))}updateAntecedentesMedicos(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let o={Authorization:`Bearer ${r}`};return this.http.post(`${this.API_URL}/paciente/${e}/antecedentes`,{antecedentes:t},{headers:o})}),i(r=>(console.error("Error al actualizar antecedentes m\xE9dicos:",r),s({ok:!1,error:r}))))}getAntecedentesOdonto(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/paciente/${e}/antecedentes-odontologicos`,{headers:r})}),i(t=>(console.error("Error al obtener antecedentes odontol\xF3gicos:",t),s(null))))}updateAntecedentesOdonto(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let o={Authorization:`Bearer ${r}`};return this.http.put(`${this.API_URL}/paciente/${e}/antecedentes-odontologicos`,t,{headers:o})}),i(r=>(console.error("Error al actualizar antecedentes odontol\xF3gicos:",r),s({ok:!1,error:r}))))}getOdontograma(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/paciente/${e}/odontogramas`,{headers:r})}),i(t=>(console.error("Error al obtener odontogramas:",t),s([]))))}uploadOdontograma(e,t,r){return this.auth.getAccessTokenSilently().pipe(n(o=>{let c={Authorization:`Bearer ${o}`},l=new FormData;return l.append("file",t),r&&l.append("observaciones",r),this.http.post(`${this.API_URL}/paciente/${e}/odontograma`,l,{headers:c})}),i(o=>(console.error("Error al subir odontograma:",o),s({ok:!1,error:o}))))}getEvolucion(e){return this.auth.getAccessTokenSilently().pipe(n(t=>{let r={Authorization:`Bearer ${t}`};return this.http.get(`${this.API_URL}/paciente/${e}/evolucion`,{headers:r})}),i(t=>(console.error("Error al obtener evoluci\xF3n:",t),s([]))))}addEvolucion(e,t){return this.auth.getAccessTokenSilently().pipe(n(r=>{let o={Authorization:`Bearer ${r}`};return this.http.post(`${this.API_URL}/paciente/${e}/evolucion`,t,{headers:o})}),i(r=>(console.error("Error al agregar evoluci\xF3n:",r),s(null))))}getServidorStatus(){return this.http.get("http://localhost:3000/")}getTablas(){return this.http.get("http://localhost:3000/test-db")}static \u0275fac=function(t){return new(t||a)};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};export{b as a};
