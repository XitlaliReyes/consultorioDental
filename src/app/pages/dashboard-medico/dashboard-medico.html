<div class="dashboard-container">
  <aside class="sidebar">
    <div class="sidebar-header">
        <h2> Panel MÃ©dico</h2>
    </div>
    <nav class="sidebar-nav">
        <div class="menu-label">MENU</div> 
        
        <a (click)="navegarA('dashboard')" 
           [class.active]="vistaActual === 'dashboard'" 
           class="nav-item">
            <span class="icon fa-solid fa-gauge"></span> Dashboard 
        </a>
        <a (click)="navegarA('citas')" 
           [class.active]="vistaActual === 'citas'" 
           class="nav-item">
            <span class="icon fa-regular fa-calendar-alt"></span> Citas
            <span *ngIf="totalCitasPendientes > 0" class="notification-badge">
                {{ totalCitasPendientes }}
            </span>
        </a>
        <a href="#" class="nav-item">
            <span class="icon fa-solid fa-users"></span> Pacientes
        </a>
        <a href="#" class="nav-item">
            <span class="icon fa-regular fa-clipboard-list"></span> Historiales
        </a>

        
        <a class="nav-item logout" (click)="logout()">
            <span class="icon fa-solid fa-right-from-bracket"></span> Cerrar SesiÃ³n
        </a>
    </nav>
</aside>

  <main class="main-content">
    <!-- Vista Dashboard -->
    <div *ngIf="vistaActual === 'dashboard'">
      <header class="dashboard-header">
        <div>
          <h1>Bienvenido, Dr. {{ medicoNombre }} {{ medicoApellidos }}</h1>
          <span class="user-email">{{ medicoCorreo }}</span>
        </div>
      </header>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ“…</div>
          <div class="stat-info">
            <h3>Citas Asignadas</h3>
            <p class="stat-number">{{ misCitas.length }}</p>
          </div>
        </div>
      
        <div class="stat-card">
          <div class="stat-icon">â°</div>
          <div class="stat-info">
            <h3>Citas Hoy</h3>
            <p class="stat-number">{{ citasHoy }}</p>
          </div>
        </div>
      
        <div class="stat-card">
          <div class="stat-icon">ğŸ””</div>
          <div class="stat-info">
            <h3>Pendientes</h3>
            <p class="stat-number">{{ totalCitasPendientes }}</p>
          </div>
        </div>
      
        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-info">
            <h3>Esta Semana</h3>
            <p class="stat-number">{{ citasEstaSemana }}</p>
          </div>
        </div>
      </div>

      <div class="content-grid">
        <section class="card">
            <div class="card-header">
                <h2 class="card-title">PrÃ³ximas Citas</h2>
                <button class="btn-refresh" (click)="cargarMisCitas()">ğŸ”„</button>
            </div>
            
            <div *ngIf="isLoadingCitas" class="loading-state">
                <p>Cargando citas...</p>
            </div>
    
            <div *ngIf="!isLoadingCitas && misCitas.length === 0" class="empty-state">
                <p> No tienes citas asignadas</p>
            </div>
    
            <div *ngIf="!isLoadingCitas && misCitas.length > 0" class="citas-container">
                <div *ngFor="let cita of misCitas" class="cita-card">
                    <div class="cita-header">
                        <span class="fecha">{{ formatearFecha(cita.Fecha) }}</span>
                        <span class="hora">{{ formatearHora(cita.Hora) }}</span>
                    </div>
                    
                    <div class="cita-body">
                        <p class="paciente-nombre">{{ cita.Paciente_Nombre }}</p>
                        
                        <p class="servicio">Servicio: {{ cita.Servicio }}</p>
                        <p class="contacto">TelÃ©fono: {{ cita.Paciente_Telefono }}</p>
                    </div>
                    
                    <div *ngIf="cita.Notas" class="cita-notas">
                        ğŸ“ Notas: {{ cita.Notas }}
                    </div>
                </div>
            </div>
        </section>
    </div>
    </div>

    <!-- Vista Citas -->
    <div *ngIf="vistaActual === 'citas'">
      <app-citas-medico></app-citas-medico>
    </div>
  </main>
</div>
